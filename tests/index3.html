<!--"https://unpkg.com/vue@3/dist/vue.esm-browser.js"-->
<script type="importmap">{
    "imports": {
      "vue": "../js/vue3.esm-browser.js"
    }
  }
</script>


<html>
    <head> 
        <script src="../js/vue.global.js"></script>
        <!--<script src="./Vue_phone_mask.js"></script>-->
        <!--<script src="./222.js"></script>-->
    </head> 
    <body>
        <main id='main'>
            <p>QQQQQQQQQQQQ</p>
            <p>{{format_phone(phone)}}</p>
            <input 
                v-model="phone"
                placeholder="+7 (9xx) xxx-xx-xx"
                autocomplete="tel"
                maxlength="15"
                type="tel"
                v-phone
                
            >
            <!--v-phone---->

        </main>
    </body>
</html>  


<!--script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>  "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"-->

<script type="module">
    import { createApp } from 'vue';

    const app = createApp({
        data() {
            return {
                phone: ""
            }
        },
        methods: {
            format_phone(in_phone){
                let ret;
                //let in_phone2;
                //in_phone2 = in_phone;
                in_phone=(in_phone+"___________1234").slice(0,11);


                ret="-"+in_phone.slice(-2);
                in_phone=in_phone.slice(0,-2);

                ret="-"+in_phone.slice(-2)+ret;
                in_phone=in_phone.slice(0,-2);

                ret=") "+in_phone.slice(-3)+ret;
                in_phone=in_phone.slice(0,-3);

                ret=" ("+in_phone.slice(-3)+ret;
                in_phone=in_phone.slice(0,-3);                

                ret="+"+in_phone+ret;
                
                return ret;
            }
        }        
    });

    app.directive('phone', {
            updated: function(e) {
                console.log(e.value.slice(0,1));
                if (e.value.slice(0,1)==8){
                    e.value="7"+e.value.slice(1);
                }
                
            }
    });

    app.mount('#main');
</script>
